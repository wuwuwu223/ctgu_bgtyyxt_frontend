(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[947],{93500:function(ce,V,a){"use strict";a.r(V),a.d(V,{default:function(){return le}});var fe=a(57338),G=a(25084),ve=a(57663),A=a(71577),me=a(47673),N=a(4107),O=a(93224),x=a(57337),T=a(11849),he=a(34792),v=a(48086),p=a(3182),z=a(94043),d=a.n(z),H=a(49101),Z=a(67294),K=a(75362),J=a(85224),Q=a(65319),X=a(37476),D=a(5966),I=a(90672),Y=a(96459),pe=a(71194),k=a(5644),C=a(3843),b=a(64317),q=a(86615),_=a(22452),r=a(85893),ee=function(l){return(0,r.jsxs)(C.Z,{stepsProps:{size:"small"},stepsFormRender:function(i,m){return(0,r.jsx)(k.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:l.updateModalVisible,footer:m,onCancel:function(){l.onCancel()},children:i})},onFinish:l.onSubmit,children:[(0,r.jsxs)(C.Z.StepForm,{initialValues:{name:l.values.name,desc:l.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,r.jsx)(D.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,r.jsx)(I.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,r.jsxs)(C.Z.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,r.jsx)(b.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,r.jsx)(b.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,r.jsx)(q.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,r.jsxs)(C.Z.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,r.jsx)(_.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,r.jsx)(b.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ae=ee,F=a(36571),re=function(){var g=(0,p.Z)(d().mark(function l(u){var i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.default.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,F.HP)((0,T.Z)({},u));case 4:return i(),v.default.success("Added successfully"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),v.default.error("Adding failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},l,null,[[1,9]])}));return function(u){return g.apply(this,arguments)}}(),te=function(){var g=(0,p.Z)(d().mark(function l(u){var i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.default.loading("Configuring"),e.prev=1,e.next=4,(0,F.D7)({name:u.name,desc:u.desc,key:u.key});case 4:return i(),v.default.success("Configuration is successful"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),v.default.error("Configuration failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},l,null,[[1,9]])}));return function(u){return g.apply(this,arguments)}}(),ne=function(){var g=(0,p.Z)(d().mark(function l(u){var i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.default.loading("\u6B63\u5728\u5220\u9664"),u){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,F.DV)({key:u.map(function(R){return R.key})});case 6:return i(),v.default.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),i(),v.default.error("Delete failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},l,null,[[3,11]])}));return function(u){return g.apply(this,arguments)}}(),se=function(){var l=(0,Z.useState)(!1),u=(0,x.Z)(l,2),i=u[0],m=u[1],e=(0,Z.useState)(!1),R=(0,x.Z)(e,2),ue=R[0],w=R[1],ie=(0,Z.useState)(!1),$=(0,x.Z)(ie,2),B=$[0],E=$[1],y=(0,Z.useRef)(),de=(0,Z.useState)(),P=(0,x.Z)(de,2),c=P[0],S=P[1],oe=(0,Z.useState)([]),M=(0,x.Z)(oe,2),j=M[0],U=M[1],L=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"name",tip:"The rule name is the unique key",render:function(t,n){return(0,r.jsx)("a",{onClick:function(){S(n),E(!0)},children:t})}},{title:"\u63CF\u8FF0",dataIndex:"desc",valueType:"textarea"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(t){return"".concat(t,"\u4E07")}},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"},3:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u4E0A\u6B21\u8C03\u5EA6\u65F6\u95F4",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(t,n,f){var h=n.defaultRender,o=(0,O.Z)(n,["defaultRender"]),W=f.getFieldValue("status");return"".concat(W)==="0"?!1:"".concat(W)==="3"?(0,r.jsx)(N.Z,(0,T.Z)((0,T.Z)({},o),{},{placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u539F\u56E0\uFF01"})):h(t)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(t,n){return[(0,r.jsx)("a",{onClick:function(){w(!0),S(n)},children:"\u914D\u7F6E"},"config"),(0,r.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,r.jsxs)(K.ZP,{children:[(0,r.jsx)(Q.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:y,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(A.Z,{type:"primary",onClick:function(){m(!0)},children:[(0,r.jsx)(H.Z,{})," \u65B0\u5EFA"]},"primary")]},request:F.jR,columns:L,rowSelection:{onChange:function(t,n){U(n)}}}),(j==null?void 0:j.length)>0&&(0,r.jsxs)(J.Z,{extra:(0,r.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,r.jsx)("a",{style:{fontWeight:600},children:j.length})," ","\u9879 \xA0\xA0",(0,r.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",j.reduce(function(s,t){return s+t.callNo},0)," \u4E07"]})]}),children:[(0,r.jsx)(A.Z,{onClick:(0,p.Z)(d().mark(function s(){var t,n;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,ne(j);case 2:U([]),(t=y.current)===null||t===void 0||(n=t.reloadAndRest)===null||n===void 0||n.call(t);case 4:case"end":return h.stop()}},s)})),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(A.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,r.jsxs)(X.Z,{title:"\u65B0\u5EFA\u89C4\u5219",width:"400px",visible:i,onVisibleChange:m,onFinish:function(){var s=(0,p.Z)(d().mark(function t(n){var f;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,re(n);case 2:f=o.sent,f&&(m(!1),y.current&&y.current.reload());case 4:case"end":return o.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),children:[(0,r.jsx)(D.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"name"}),(0,r.jsx)(I.Z,{width:"md",name:"desc"})]}),(0,r.jsx)(ae,{onSubmit:function(){var s=(0,p.Z)(d().mark(function t(n){var f;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,te(n);case 2:f=o.sent,f&&(w(!1),S(void 0),y.current&&y.current.reload());case 4:case"end":return o.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),onCancel:function(){w(!1),B||S(void 0)},updateModalVisible:ue,values:c||{}}),(0,r.jsx)(G.Z,{width:600,visible:B,onClose:function(){S(void 0),E(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,r.jsx)(Y.Z,{column:2,title:c==null?void 0:c.name,request:(0,p.Z)(d().mark(function s(){return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{data:c||{}});case 1:case"end":return n.stop()}},s)})),params:{id:c==null?void 0:c.name},columns:L})})]})},le=se}}]);
